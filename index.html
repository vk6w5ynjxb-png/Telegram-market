<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¨Ø§Ø²Ø§Ø±Ú†Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-color: #0088cc; --bg: var(--tg-theme-bg-color, #fff); --text: var(--tg-theme-text-color, #000); --sec-bg: var(--tg-theme-secondary-bg-color, #f0f0f0); }
        body { font-family: Tahoma, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding-bottom: 80px; }
        
        /* ØµÙØ­Ø§Øª */
        .page { display: none; padding: 15px; }
        .page.active { display: block; }

        /* Ø§Ø³ØªØ§ÛŒÙ„ ÙØ±Ù… Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ */
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; font-size: 13px; color: var(--main-color); }
        .form-input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; background: var(--sec-bg); color: var(--text); box-sizing: border-box; }
        .btn-submit { width: 100%; padding: 15px; background: var(--main-color); color: white; border: none; border-radius: 10px; font-size: 16px; font-weight: bold; margin-top: 20px; }

        /* Ú©Ø§Ø±Øª Ù…Ø­ØµÙˆÙ„ */
        .product-card { background: var(--bg); border: 1px solid #ddd; border-radius: 10px; margin-bottom: 10px; padding: 10px; display: flex; align-items: center; }
        .p-img { width: 80px; height: 80px; background: #ddd; border-radius: 8px; object-fit: cover; margin-left: 10px; }
        
        /* Ù†ÙˆØ§Ø± Ù¾Ø§ÛŒÛŒÙ† */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; background: var(--bg); border-top: 1px solid #ddd; display: flex; justify-content: space-around; padding: 10px 0; }
        .nav-item { text-align: center; color: #888; font-size: 12px; }
        .nav-item.active { color: var(--main-color); }
    </style>
</head>
<body>

    <div id="homePage" class="page active">
        <h3>ğŸ›’ ØªØ§Ø²Ù‡â€ŒØªØ±ÛŒÙ† Ø¢Ú¯Ù‡ÛŒâ€ŒÙ‡Ø§</h3>
        <div id="productList">
            <div class="product-card">
                <img src="https://picsum.photos/100" class="p-img">
                <div>
                    <h4>Ú¯ÙˆØ´ÛŒ Ø¢ÛŒÙÙˆÙ† 13</h4>
                    <p style="color:green">35,000,000 ØªÙˆÙ…Ø§Ù†</p>
                </div>
            </div>
        </div>
    </div>

    <div id="addPage" class="page">
        <h3>ğŸ“ Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ Ø¬Ø¯ÛŒØ¯</h3>
        <div class="form-group">
            <label class="form-label">Ø¹Ù†ÙˆØ§Ù† Ø¢Ú¯Ù‡ÛŒ</label>
            <input type="text" id="pTitle" class="form-input" placeholder="Ù…Ø«Ù„Ø§: Ø¯ÙˆÚ†Ø±Ø®Ù‡ Ú©ÙˆÙ‡Ø³ØªØ§Ù†">
        </div>
        <div class="form-group">
            <label class="form-label">Ù‚ÛŒÙ…Øª (ØªÙˆÙ…Ø§Ù†)</label>
            <input type="tel" id="pPrice" class="form-input" placeholder="Ù…Ø«Ù„Ø§: 2000000">
        </div>
        <div class="form-group">
            <label class="form-label">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
            <textarea id="pDesc" class="form-input" rows="3"></textarea>
        </div>
        <button class="btn-submit" onclick="submitAd()">Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ Ø±Ø¨Ø§Øª</button>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="switchPage('homePage', this)">
            <i class="fa fa-home fa-lg"></i><br>Ø®Ø§Ù†Ù‡
        </div>
        <div class="nav-item" onclick="switchPage('addPage', this)">
            <i class="fa fa-plus-circle fa-lg"></i><br>Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ
        </div>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function switchPage(pageId, element) {
            // Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ ØµÙØ­Ø§Øª
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            // Ù†Ù…Ø§ÛŒØ´ ØµÙØ­Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            document.getElementById(pageId).classList.add('active');
            element.classList.add('active');
        }

        function submitAd() {
            const title = document.getElementById('pTitle').value;
            const price = document.getElementById('pPrice').value;
            const desc = document.getElementById('pDesc').value;

            if(!title || !price) {
                tg.showPopup({title: 'Ø®Ø·Ø§', message: 'Ù„Ø·ÙØ§ Ø¹Ù†ÙˆØ§Ù† Ùˆ Ù‚ÛŒÙ…Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯'});
                return;
            }

            // Ø³Ø§Ø®Øª ÛŒÚ© Ø¨Ø³ØªÙ‡ Ø§Ø·Ù„Ø§Ø¹Ø§ØªÛŒ (JSON)
            const data = {
                action: "new_post",
                title: title,
                price: price,
                desc: desc
            };

            // Ø§Ø±Ø³Ø§Ù„ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ù‡ Ø±Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
            tg.sendData(JSON.stringify(data));
        }
    </script>
</body>
</html>
